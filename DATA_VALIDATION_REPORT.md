# æ•°æ®éªŒè¯æœºåˆ¶å®ç°æŠ¥å‘Š

## ğŸš¨ é—®é¢˜å‘ç°

**ç”¨æˆ·åé¦ˆ**: å‘ç°å†å²æ•°æ®æ—¶é—´è½´ä¸­å‡ºç°å¼‚å¸¸æ•°æ®

### å¼‚å¸¸æ•°æ®ç¤ºä¾‹
```
2025-12-06 18:00:46
æ€¥æ¶¨0 æ€¥è·Œ0 è®¡æ¬¡13 ----
çŠ¶æ€éªŒè¯å¤±è´¥ æ¯”å€¼0
æ€¥æ¶¨/æ€¥è·Œ0 â‰ˆçŠ¶æ€0 24hæ¶¨â‰¥10% 24hè·Œâ‰¤-10%
```

### é—®é¢˜åˆ†æ
- **æ­£å¸¸è¶‹åŠ¿**: æ€¥æ¶¨å’Œæ€¥è·Œæ•°å€¼åº”è¯¥**å•è°ƒé€’å¢**ï¼ˆåªèƒ½å¢å¤§æˆ–ä¿æŒï¼Œä¸èƒ½å‡å°ï¼‰
- **å¼‚å¸¸æ•°æ®**: 18:00:46 çš„æ•°æ®æ˜¾ç¤º `æ€¥æ¶¨0 æ€¥è·Œ0`ï¼Œä½†ä¸Šä¸€æ¡è®°å½•æ˜¯ `æ€¥æ¶¨3 æ€¥è·Œ22`
- **åŸå› **: æºtxtæ–‡ä»¶å†…å®¹å¼‚å¸¸æˆ–è§£æé”™è¯¯

### æ•°æ®åº“ä¸­çš„å¼‚å¸¸è®°å½•
```
ID  49 | 2025-12-06 18:00:46 | æ€¥æ¶¨: 0 | æ€¥è·Œ: 0 | è®¡æ¬¡:13 âŒ å¼‚å¸¸
ID  48 | 2025-12-06 17:50:13 | æ€¥æ¶¨: 3 | æ€¥è·Œ:22 | è®¡æ¬¡:12 âœ… æ­£å¸¸
```

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. æ¸…ç†å¼‚å¸¸æ•°æ®
```sql
-- åˆ é™¤å¼‚å¸¸è®°å½•
DELETE FROM crypto_snapshots WHERE id = 49;
DELETE FROM crypto_coin_data WHERE snapshot_id = 49;

-- ç»“æœ
âœ… æ•°æ®åº“è®°å½•: 48æ¡ â†’ 47æ¡
âœ… å¼‚å¸¸æ•°æ®å·²æ¸…é™¤
```

### 2. æ·»åŠ æ•°æ®éªŒè¯æœºåˆ¶

#### éªŒè¯è§„åˆ™
```
è§„åˆ™1: æ€¥æ¶¨åªèƒ½å¢å¤§
  new_rush_up >= last_rush_up

è§„åˆ™2: æ€¥è·Œåªèƒ½å¢å¤§  
  new_rush_down >= last_rush_down

è¿åè§„åˆ™ â†’ æ‹’ç»å­˜å‚¨ + è¾“å‡ºè­¦å‘Š
```

#### å®ç°ä»£ç 
```python
# åœ¨ collect_and_store.py å­˜å‚¨æ•°æ®å‰æ·»åŠ éªŒè¯

# è·å–æœ€è¿‘ä¸€æ¡è®°å½•
cursor.execute("""
    SELECT rush_up, rush_down, snapshot_time 
    FROM crypto_snapshots 
    ORDER BY snapshot_time DESC 
    LIMIT 1
""")
last_record = cursor.fetchone()

if last_record:
    last_rush_up, last_rush_down, last_time = last_record
    
    # éªŒè¯æ–°æ•°æ®
    if new_rush_up < last_rush_up or new_rush_down < last_rush_down:
        print(f"\nâš ï¸  æ•°æ®å¼‚å¸¸æ£€æµ‹ï¼")
        print(f"   ä¸Šä¸€æ¡è®°å½• ({last_time}): æ€¥æ¶¨={last_rush_up}, æ€¥è·Œ={last_rush_down}")
        print(f"   å½“å‰æ•°æ®: æ€¥æ¶¨={new_rush_up}, æ€¥è·Œ={new_rush_down}")
        
        if new_rush_up < last_rush_up:
            print(f"   âŒ æ€¥æ¶¨æ•°å€¼å‡å°: {last_rush_up} â†’ {new_rush_up}")
        if new_rush_down < last_rush_down:
            print(f"   âŒ æ€¥è·Œæ•°å€¼å‡å°: {last_rush_down} â†’ {new_rush_down}")
        
        print(f"\nğŸš« æ‹’ç»å­˜å‚¨å¼‚å¸¸æ•°æ®ï¼")
        conn.close()
        return None  # è¿”å›Noneè¡¨ç¤ºæ•°æ®è¢«æ‹’ç»
```

#### å·¥ä½œæµç¨‹
```
1. é‡‡é›†æ–°æ•°æ®
   â†“
2. æŸ¥è¯¢æœ€è¿‘ä¸€æ¡è®°å½•
   â†“
3. æ¯”è¾ƒæ–°æ—§æ•°æ®
   â†“
4a. æ•°æ®åˆæ³• â†’ å­˜å‚¨åˆ°æ•°æ®åº“ âœ…
4b. æ•°æ®å¼‚å¸¸ â†’ æ‹’ç»å­˜å‚¨ + è­¦å‘Š âŒ
```

## ğŸ§ª éªŒè¯æµ‹è¯•

### æµ‹è¯•åœºæ™¯1: æ­£å¸¸æ•°æ®
```
ä¸Šä¸€æ¡: æ€¥æ¶¨3, æ€¥è·Œ22
æ–°æ•°æ®: æ€¥æ¶¨4, æ€¥è·Œ23
ç»“æœ: âœ… é€šè¿‡éªŒè¯ï¼ŒæˆåŠŸå­˜å‚¨
```

### æµ‹è¯•åœºæ™¯2: å¼‚å¸¸æ•°æ®ï¼ˆæ€¥æ¶¨å‡å°ï¼‰
```
ä¸Šä¸€æ¡: æ€¥æ¶¨3, æ€¥è·Œ22
æ–°æ•°æ®: æ€¥æ¶¨0, æ€¥è·Œ22
ç»“æœ: âŒ æ£€æµ‹åˆ°å¼‚å¸¸
      âš ï¸  æ€¥æ¶¨æ•°å€¼å‡å°: 3 â†’ 0
      ğŸš« æ‹’ç»å­˜å‚¨
```

### æµ‹è¯•åœºæ™¯3: å¼‚å¸¸æ•°æ®ï¼ˆæ€¥è·Œå‡å°ï¼‰
```
ä¸Šä¸€æ¡: æ€¥æ¶¨3, æ€¥è·Œ22
æ–°æ•°æ®: æ€¥æ¶¨3, æ€¥è·Œ0
ç»“æœ: âŒ æ£€æµ‹åˆ°å¼‚å¸¸
      âš ï¸  æ€¥è·Œæ•°å€¼å‡å°: 22 â†’ 0
      ğŸš« æ‹’ç»å­˜å‚¨
```

### æµ‹è¯•åœºæ™¯4: æ•°æ®ä¿æŒä¸å˜
```
ä¸Šä¸€æ¡: æ€¥æ¶¨3, æ€¥è·Œ22
æ–°æ•°æ®: æ€¥æ¶¨3, æ€¥è·Œ22
ç»“æœ: âœ… é€šè¿‡éªŒè¯ï¼ˆç­‰äºä¹Ÿå…è®¸ï¼‰
```

## ğŸ“Š å®æ–½æ•ˆæœ

### æ•°æ®åº“çŠ¶æ€å¯¹æ¯”

| æŒ‡æ ‡ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| **æ€»è®°å½•æ•°** | 48æ¡ | 47æ¡ |
| **å¼‚å¸¸è®°å½•** | 1æ¡ (ID 49) | 0æ¡ âœ… |
| **éªŒè¯æœºåˆ¶** | âŒ æ—  | âœ… å·²å®æ–½ |
| **æ•°æ®è´¨é‡** | æœ‰æ±¡æŸ“é£é™© | å—ä¿æŠ¤ |

### æœ€æ–°æ•°æ®éªŒè¯
```
ğŸ“Š æ•°æ®åº“æœ€æ–°5æ¡è®°å½•:
  ID |         æ—¶é—´          |   æ€¥æ¶¨ |   æ€¥è·Œ |   è®¡æ¬¡
--------------------------------------------------------------
  48 | 2025-12-06 17:50:13 |    3 |   22 |   12 âœ…
  47 | 2025-12-06 17:39:09 |    3 |   22 |   12 âœ…
  46 | 2025-12-06 17:25:36 |    3 |   22 |   12 âœ…
  45 | 2025-12-06 17:24:53 |    3 |   22 |   12 âœ…
   5 | 2025-12-06 16:56:42 |    2 |   22 |   12 âœ…

âœ… æ‰€æœ‰æ•°æ®ç¬¦åˆå•è°ƒé€’å¢è§„åˆ™
```

## ğŸ›¡ï¸ ä¿æŠ¤æœºåˆ¶ä¼˜åŠ¿

### 1. è‡ªåŠ¨è¿‡æ»¤å¼‚å¸¸æ•°æ®
- ä¸éœ€è¦äººå·¥æ£€æŸ¥æ¯ä¸ªtxtæ–‡ä»¶
- è‡ªåŠ¨è¯†åˆ«å’Œæ‹’ç»æœ‰é—®é¢˜çš„æ•°æ®
- ä¿æŒæ•°æ®åº“æ¸…æ´

### 2. ä¿æŒè¶‹åŠ¿å›¾è¿ç»­æ€§
- é¿å…å›¾è¡¨å‡ºç°çªé™
- ç¡®ä¿è¶‹åŠ¿çº¿ç¬¦åˆé€»è¾‘
- æé«˜æ•°æ®å¯ä¿¡åº¦

### 3. é—®é¢˜è¿½è¸ª
- è¾“å‡ºè¯¦ç»†çš„å¼‚å¸¸æ—¥å¿—
- ä¾¿äºå®šä½é—®é¢˜æ¥æº
- æ”¯æŒåç»­åˆ†æ

### 4. é›¶å¹²é¢„è¿è¡Œ
- é‡‡é›†ç³»ç»Ÿè‡ªåŠ¨å¤„ç†å¼‚å¸¸
- æ— éœ€äººå·¥å¹²é¢„
- ç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ

## ğŸ“ˆ è¶‹åŠ¿å›¾å½±å“

### ä¿®å¤å‰ï¼ˆå­˜åœ¨å¼‚å¸¸æ•°æ®ï¼‰
```
 æ€¥æ¶¨
  4 |
  3 |     â—â”€â”€â”€â—â”€â”€â”€â—
  2 |                     â—
  1 |
  0 |                 â—       â† å¼‚å¸¸çªé™
     15:00  16:00  17:00  18:00
```

### ä¿®å¤åï¼ˆå¼‚å¸¸æ•°æ®è¢«æ‹’ç»ï¼‰
```
 æ€¥æ¶¨
  4 |
  3 |     â—â”€â”€â”€â—â”€â”€â”€â—â”€â”€â”€â—
  2 |                     â—
  1 |
  0 |
     15:00  16:00  17:00  18:00
              â†‘
       å¼‚å¸¸æ•°æ®ç‚¹è¢«è¿‡æ»¤ï¼Œä¸æ˜¾ç¤º
```

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### éªŒè¯æ—¶æœº
- **ä½ç½®**: æ•°æ®è§£æå®Œæˆåï¼Œå­˜å‚¨åˆ°æ•°æ®åº“ä¹‹å‰
- **é¢‘ç‡**: æ¯æ¬¡é‡‡é›†éƒ½ä¼šéªŒè¯
- **æ€§èƒ½**: åªæŸ¥è¯¢æœ€è¿‘1æ¡è®°å½•ï¼Œæ€§èƒ½å½±å“å¯å¿½ç•¥

### è¾¹ç•Œæƒ…å†µå¤„ç†
1. **é¦–æ¬¡é‡‡é›†**: æ•°æ®åº“ä¸ºç©ºæ—¶ï¼Œè·³è¿‡éªŒè¯ç›´æ¥å­˜å‚¨
2. **æ•°æ®ç›¸ç­‰**: å…è®¸æ€¥æ¶¨/æ€¥è·Œä¿æŒä¸å˜ï¼ˆç­‰äºä¸Šä¸€æ¬¡ï¼‰
3. **å¤šå­—æ®µå¼‚å¸¸**: åªè¦æœ‰ä¸€ä¸ªå­—æ®µå‡å°å°±æ‹’ç»æ•´æ¡è®°å½•

### æ—¥å¿—è¾“å‡ºç¤ºä¾‹
```
âš ï¸  æ•°æ®å¼‚å¸¸æ£€æµ‹ï¼
   ä¸Šä¸€æ¡è®°å½• (2025-12-06 17:50:13): æ€¥æ¶¨=3, æ€¥è·Œ=22
   å½“å‰æ•°æ®: æ€¥æ¶¨=0, æ€¥è·Œ=0
   âŒ æ€¥æ¶¨æ•°å€¼å‡å°: 3 â†’ 0
   âŒ æ€¥è·Œæ•°å€¼å‡å°: 22 â†’ 0

ğŸš« æ‹’ç»å­˜å‚¨å¼‚å¸¸æ•°æ®ï¼
```

## ğŸ¯ æ€»ç»“

### âœ… å·²å®Œæˆ
1. **å‘ç°é—®é¢˜**: è¯†åˆ«å‡ºID 49çš„å¼‚å¸¸æ•°æ®
2. **æ¸…ç†æ•°æ®**: åˆ é™¤å¼‚å¸¸è®°å½•
3. **å®æ–½éªŒè¯**: æ·»åŠ æ•°æ®éªŒè¯é€»è¾‘
4. **é‡å¯æœåŠ¡**: åº”ç”¨æ–°çš„éªŒè¯æœºåˆ¶
5. **æäº¤ä»£ç **: æ¨é€åˆ°GitHub

### ğŸ“Š æœ€ç»ˆçŠ¶æ€
- **æ•°æ®åº“**: 47æ¡è®°å½•ï¼Œå…¨éƒ¨åˆæ³•
- **éªŒè¯æœºåˆ¶**: å·²éƒ¨ç½²å¹¶è¿è¡Œ
- **å®ˆæŠ¤è¿›ç¨‹**: æ­£å¸¸è¿è¡Œ (PID: 51715)
- **é‡‡é›†é—´éš”**: æ¯10åˆ†é’Ÿ
- **æ•°æ®è´¨é‡**: å—ä¿æŠ¤ âœ…

### ğŸ”® åç»­ä¿éšœ
- æ‰€æœ‰æ–°é‡‡é›†çš„æ•°æ®éƒ½ä¼šè‡ªåŠ¨éªŒè¯
- å¼‚å¸¸æ•°æ®ä¼šè¢«è‡ªåŠ¨æ‹’ç»
- æ—¥å¿—ä¸­ä¼šè®°å½•æ‰€æœ‰æ‹’ç»çš„æ•°æ®
- æ•°æ®åº“ä¿æŒæ¸…æ´å’Œè¿ç»­æ€§

### ğŸŒ è®¿é—®åœ°å€
**Webç•Œé¢**: https://5000-iik759kgm7i3zqlxvfrfx-cc2fbc16.sandbox.novita.ai

**GitHub PR**: https://github.com/jamesyidc/6666/pull/1
- æœ€æ–°æäº¤: `ce39c6a` - "feat: æ·»åŠ æ•°æ®éªŒè¯é˜²æ­¢å¼‚å¸¸æ•°æ®å…¥åº“"

---

**å®æ–½æ—¶é—´**: 2025-12-06 18:11  
**çŠ¶æ€**: âœ… å®Œæˆå¹¶æ­£å¸¸è¿è¡Œ  
**æ•ˆæœ**: æ•°æ®è´¨é‡å¾—åˆ°æœ‰æ•ˆä¿æŠ¤
