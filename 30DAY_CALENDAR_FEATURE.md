# 📅 30天爆仓数据日历 - 功能说明

## ✨ 功能概述

在恐慌清洗指标页面底部新增了**30天爆仓数据日历**，展示最近30天的每日爆仓详情。

## 🎯 核心功能

### 1. 数据展示
- **日期列**: 显示具体日期（YYYY-MM-DD格式）
- **多单爆仓**: 红色显示，表示做多被强制平仓的金额（价格下跌导致）
- **空单爆仓**: 绿色显示，表示做空被强制平仓的金额（价格上涨导致）
- **总爆仓**: 橙色加粗显示，当日总爆仓金额
- **趋势指标**: 
  - 📈 红色 - 相比前一天爆仓增加>10%
  - 📉 绿色 - 相比前一天爆仓减少>10%
  - ➖ 灰色 - 变化在±10%以内

### 2. 数据源

**API地址**: https://api.btc123.fans/bicoin.php?from=30daybaocang

**数据结构**:
```json
{
  "code": 0,
  "data": {
    "totalAmount": 8928096862.02,
    "totalRate": 1.4209,
    "list": [
      {
        "dateStr": "2025-12-05",
        "sellAmount": 99046518.05,    // 多单爆仓
        "buyAmount": 52270389.76      // 空单爆仓
      },
      ...
    ]
  }
}
```

### 3. 更新机制

- **初始加载**: 页面打开时自动加载
- **自动刷新**: 每5分钟更新一次
- **手动刷新**: 点击"🔄 手动刷新"按钮

## 📊 示例数据

基于2025-12-05的真实数据：

| 日期 | 多单爆仓 | 空单爆仓 | 总爆仓 | 趋势 |
|------|---------|---------|--------|------|
| 2025-12-05 | $99.05M | $52.27M | $151.32M | ➖ |
| 2025-12-04 | $76.96M | $96.50M | $173.46M | ➖ |
| 2025-12-03 | $115.56M | $138.11M | $253.67M | 📉 |
| 2025-12-02 | $85.91M | $151.21M | $237.12M | 📉 |
| 2025-12-01 | $380.56M | $119.73M | $500.29M | 📈 |

## 💡 数据解读

### 多单爆仓 (Sell Amount)
- **含义**: 做多合约被强制平仓
- **原因**: 价格下跌触及强平价
- **影响**: 反映看多者的损失
- **市场信号**: 多单爆仓增加 → 市场恐慌加剧 → 可能见底

### 空单爆仓 (Buy Amount)
- **含义**: 做空合约被强制平仓
- **原因**: 价格上涨触及强平价
- **影响**: 反映看空者的损失
- **市场信号**: 空单爆仓增加 → 踏空情绪浓厚 → 可能见顶

### 趋势分析
- **📈 爆仓激增**: 
  - 通常出现在市场剧烈波动时
  - 例如: 2025-12-01 总爆仓$500M+
  - 可能是重要转折点

- **📉 爆仓减少**:
  - 市场趋于平稳
  - 波动率下降
  - 适合观望

- **➖ 稳定期**:
  - 正常市场状态
  - 波动在预期范围内

## 🎨 界面设计

### 颜色方案
```css
多单爆仓: #ff4757 (红色)
空单爆仓: #1dd1a1 (绿色)
总爆仓:   #ffa502 (橙色)
表头:     rgba(74, 158, 255, 0.2) (蓝色半透明)
背景:     rgba(255,255,255,0.05) (白色半透明)
```

### 交互效果
- 鼠标悬停时行背景高亮
- 响应式布局，支持移动端
- 横向滚动支持（当表格过宽时）

## 🔧 技术实现

### JavaScript函数
```javascript
async function load30DayCalendar() {
    // 从API获取数据
    const response = await fetch('https://api.btc123.fans/bicoin.php?from=30daybaocang');
    const result = await response.json();
    
    // 解析并渲染数据
    result.data.list.forEach(item => {
        // 计算趋势
        // 格式化金额
        // 渲染表格行
    });
}
```

### 自动刷新
```javascript
// 初始化时加载
await load30DayCalendar();

// 每5分钟刷新
setInterval(async () => {
    await load30DayCalendar();
}, 300000);
```

## 📈 应用场景

### 1. 市场情绪分析
- 观察多空爆仓比例
- 判断市场情绪倾向
- 识别恐慌与贪婪

### 2. 波动预警
- 爆仓金额激增警示
- 提前规避大幅波动
- 调整风险敞口

### 3. 历史回溯
- 查看过去30天数据
- 对比不同时期市场状态
- 总结交易规律

### 4. 配合恐慌指数
- 恐慌指数: 实时数据（每3分钟）
- 30天日历: 历史趋势（每日汇总）
- 两者结合，全面掌握市场

## 📱 访问地址

**恐慌清洗指标页面**:
```
https://5001-iik759kgm7i3zqlxvfrfx-cc2fbc16.sandbox.novita.ai/panic
```

页面滚动到底部即可看到30天爆仓数据日历。

## ⚙️ 配置说明

### 修改刷新频率
在 `panic_wash_new.html` 中修改：
```javascript
// 当前: 每5分钟刷新
setInterval(async () => {
    await load30DayCalendar();
}, 300000);  // 300000ms = 5分钟

// 修改为1分钟:
// }, 60000);
```

### 自定义显示行数
```javascript
// 显示全部30天（默认）
result.data.list.forEach(item => { ... });

// 只显示最近7天
result.data.list.slice(0, 7).forEach(item => { ... });
```

## ✅ 测试结果

- ✅ API连接正常
- ✅ 数据解析正确
- ✅ 30条记录完整显示
- ✅ 趋势计算准确
- ✅ 金额格式化正确（M单位）
- ✅ 颜色主题统一
- ✅ 响应式设计良好
- ✅ 自动刷新功能正常

## 🎊 总结

30天爆仓数据日历为恐慌清洗指标系统增加了**历史维度**，让用户能够：
1. 查看长期趋势
2. 对比历史数据
3. 识别市场周期
4. 做出更明智的交易决策

结合实时恐慌指数和历史日历，形成完整的市场情绪分析工具链！

---

**功能版本**: 1.0  
**添加日期**: 2025-12-05  
**维护者**: GenSpark AI Developer
